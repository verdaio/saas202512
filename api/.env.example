# ========================================
# Pet Care SaaS - Environment Configuration
# ========================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ==================== APPLICATION ====================

APP_NAME="Pet Care SaaS"
APP_ENV=development  # development, staging, production
DEBUG=true
SECRET_KEY=your-secret-key-change-this-in-production-must-be-random-and-secure

# API Configuration
API_V1_STR=/api/v1
PROJECT_NAME=Pet Care Booking API
VERSION=1.0.0
DESCRIPTION=Multi-tenant pet care booking and management system
HOST=0.0.0.0
BACKEND_PORT=8012

# CORS Configuration
CORS_ORIGINS=["http://localhost:3012","http://localhost:3000","http://127.0.0.1:3012"]
CORS_ALLOW_CREDENTIALS=true

# ==================== DATABASE ====================

# PostgreSQL Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5412/saas202512
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=0
DB_ECHO=false  # Set to true for SQL query logging

# ==================== REDIS ====================

REDIS_URL=redis://localhost:6412
REDIS_CACHE_TTL=3600  # Cache TTL in seconds (1 hour)

# ==================== AUTHENTICATION ====================

# JWT Settings
JWT_SECRET=change-this-to-a-secure-random-string-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
BCRYPT_ROUNDS=12

# ==================== STRIPE PAYMENT ====================

STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Settings
STRIPE_CURRENCY=usd
STRIPE_CAPTURE_METHOD=automatic  # automatic or manual

# ==================== TWILIO SMS ====================

TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890  # Your Twilio phone number

# SMS Settings
SMS_ENABLED=true
SMS_RATE_LIMIT=100  # Max SMS per hour per tenant
SMS_BATCH_SIZE=100  # Batch size for bulk sends

# ==================== MULTI-TENANT ====================

MULTI_TENANT_ENABLED=true
TENANT_RESOLUTION=subdomain  # subdomain, path, or header
DEFAULT_TENANT_SUBDOMAIN=demo

# ==================== SPRINT 4 SETTINGS ====================

# No-Show Configuration
NO_SHOW_GRACE_PERIOD_MINUTES=15
NO_SHOW_FEE_AMOUNT=2500  # $25 in cents
NO_SHOW_FEE_SCHEDULE=2500,3500,5000,7500  # Escalating fees

# Reputation System
REPUTATION_MIN_SCORE=0
REPUTATION_MAX_SCORE=100
REPUTATION_DEFAULT_SCORE=100
REPUTATION_BOOKING_THRESHOLD=30  # Minimum score to book

# Reputation Points
REPUTATION_POINTS_NO_SHOW=-20
REPUTATION_POINTS_LATE_CANCELLATION=-10
REPUTATION_POINTS_COMPLETED=2
REPUTATION_POINTS_ON_TIME=5

# Reputation Recovery
REPUTATION_RECOVERY_DAYS=90  # Days of good behavior required
REPUTATION_RECOVERY_POINTS=5  # Points added for recovery

# Vaccination Monitoring
VACCINATION_ALERT_THRESHOLDS=30,14,7  # Days before expiry to send alerts
VACCINATION_ALERT_ENABLED=true

# ==================== SPRINT 5 SETTINGS ====================

# SMS Workflow Engine
SMS_WORKFLOW_ENABLED=true
SMS_WORKFLOW_MAX_ACTIONS=10
SMS_WORKFLOW_TIMEOUT_SECONDS=30

# ==================== SPRINT 6 SETTINGS ====================

# Reporting
REPORTS_CACHE_TTL=3600  # 1 hour cache for reports
REPORTS_EXPORT_PATH=/tmp/reports/
REPORTS_MAX_RANGE_DAYS=365  # Max date range for reports

# Report Generation
REPORTS_ASYNC_ENABLED=true  # Generate large reports asynchronously
REPORTS_BATCH_SIZE=1000  # Records per batch for large reports

# ==================== SCHEDULED TASKS ====================

# Task Scheduler
TASK_SCHEDULER_ENABLED=true
TASK_TIMEZONE=UTC  # or America/New_York, etc.

# Task Execution
TASK_MAX_RETRIES=3
TASK_RETRY_DELAY_SECONDS=60

# Celery (if using Celery for tasks)
CELERY_BROKER_URL=redis://localhost:6412/1
CELERY_RESULT_BACKEND=redis://localhost:6412/2
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# ==================== FILE STORAGE ====================

# Storage Backend (local, s3, azure)
STORAGE_BACKEND=local
STORAGE_LOCAL_PATH=./uploads

# AWS S3 (if using S3)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=petcare-uploads
AWS_S3_REGION=us-east-1

# Azure Blob Storage (if using Azure)
AZURE_STORAGE_CONNECTION_STRING=your_azure_connection_string
AZURE_STORAGE_CONTAINER=petcare-uploads

# ==================== LOGGING ====================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Log Files
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_BYTES=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5

# ==================== MONITORING ====================

# Sentry Error Tracking (Optional)
# SENTRY_DSN=https://your-sentry-dsn-here
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions

# Application Insights (Azure - Optional)
# AZURE_APPLICATION_INSIGHTS_CONNECTION_STRING=your-connection-string-here

# ==================== SECURITY ====================

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# API Keys
API_KEY_HEADER=X-API-Key
ADMIN_API_KEY=your_admin_api_key_change_this

# ==================== FEATURE FLAGS ====================

# Feature Toggles
FEATURE_BOOKING_WIDGET=true
FEATURE_PAYMENT_PROCESSING=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_REPUTATION_SYSTEM=true
FEATURE_VACCINATION_TRACKING=true
FEATURE_NO_SHOW_FEES=true
FEATURE_REPORTING=true

# ==================== TESTING ====================

# Test Database
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5412/saas202512_test

# Test Settings
TEST_SMS_ENABLED=false  # Disable SMS in tests
TEST_STRIPE_ENABLED=false  # Use Stripe test mode in tests

# ==================== NOTES ====================

# This configuration supports:
# ✅ Multi-tenant SaaS architecture
# ✅ Stripe payment processing
# ✅ Twilio SMS notifications
# ✅ Reputation scoring system
# ✅ No-show detection and fees
# ✅ Vaccination monitoring
# ✅ Business intelligence reporting
# ✅ Scheduled background tasks
# ✅ File storage (local/cloud)
# ✅ Error monitoring
# ✅ Rate limiting
# ✅ Feature flags

# For production deployment:
# 1. Copy this file to .env
# 2. Update all secret keys with secure random values
# 3. Set APP_ENV=production
# 4. Set DEBUG=false
# 5. Configure production database URL
# 6. Add real Stripe/Twilio credentials
# 7. Enable HTTPS and security headers
# 8. Configure monitoring (Sentry/App Insights)
# 9. Set up proper logging
# 10. Review and adjust all settings for your needs

# Security checklist:
# ⚠️ Never commit .env to git
# ⚠️ Use strong random values for SECRET_KEY and JWT_SECRET
# ⚠️ Use environment-specific credentials
# ⚠️ Enable HTTPS in production
# ⚠️ Set up proper CORS origins
# ⚠️ Enable rate limiting
# ⚠️ Configure proper logging
# ⚠️ Use secrets management (Azure Key Vault, AWS Secrets Manager)
